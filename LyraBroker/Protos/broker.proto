syntax = "proto3";

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";

option csharp_namespace = "LyraBroker";

package broker;

service BrokerRPC {
  rpc GetStatus (google.protobuf.Empty) returns (GetStatusReply);
  rpc OpenWallet (OpenWalletRequest) returns (OpenWalletReply);
  rpc GetBalance (GetBalanceRequest) returns (GetBalanceReply);
  rpc Send (SendRequest) returns (SendReply);
  rpc CloseWallet (CloseWalletRequest) returns (CloseWalletReply);
}

message OpenWalletRequest {
	string privateKey = 1;
}

message OpenWalletReply {
	string accountId = 1;
	string walletId = 2;
}

message CloseWalletRequest {
	string walletId = 1;
}

message CloseWalletReply {
	bool success = 1;
}

message GetBalanceRequest {
	string walletId = 1;
}

message GetBalanceReply {
	repeated LyraBalance balances = 1;
}

message LyraBalance{
	string ticker = 1;
	int64 balance = 2;
}

message GetStatusReply {
	bool IsReady = 1;
}

message SendRequest {
	string walletId = 1;
	double amount = 2;
	string destAccountId = 3;
	string ticker = 4;
}

message SendReply {
	string walletId = 1;
	bool success = 2;
}